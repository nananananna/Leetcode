# 24.ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„ç»“ç‚¹
[é¢˜ç›®é“¾æ¥ï¼š24.ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„ç»“ç‚¹](https://leetcode.cn/problems/swap-nodes-in-pairs/)  
[æ–‡ç« é“¾æ¥](https://programmercarl.com/0024.%E4%B8%A4%E4%B8%A4%E4%BA%A4%E6%8D%A2%E9%93%BE%E8%A1%A8%E4%B8%AD%E7%9A%84%E8%8A%82%E7%82%B9.html#%E6%80%9D%E8%B7%AF)  
[è§†é¢‘é“¾æ¥](https://www.bilibili.com/video/BV1YT411g7br/?spm_id_from=pageDriver&vd_source=bb16fbea368fef2149255510d2feefbe)  
çŠ¶æ€ï¼šæƒ³ä¸å‡ºæ¥

## æ–¹æ³•ä¸€ï¼šé€’å½’
æ€è·¯ï¼šä¸è¦è·³è¿›é€’å½’çš„è¿‡ç¨‹é‡Œé¢ï¼Œè¦ä»æœ€å¤–å±‚è€ƒè™‘ï¼Œothersé€’å½’è¿”å›çš„ç»“æœçœ‹æˆä¸€ä¸ªæ•´ä½“ï¼Œfirstå’Œsecondå¦‚ä½•ä¿®æ”¹ï¼Ÿ

![æµç¨‹](/images/5-1.png)

```java
// é€’å½’ç‰ˆæœ¬
class Solution {
    // å®šä¹‰ï¼šè¾“å…¥ä»¥ head å¼€å¤´çš„å•é“¾è¡¨ï¼Œå°†è¿™ä¸ªå•é“¾è¡¨ä¸­çš„æ¯ä¸¤ä¸ªå…ƒç´ ç¿»è½¬ï¼Œ
    // è¿”å›ç¿»è½¬åçš„é“¾è¡¨å¤´ç»“ç‚¹
    public ListNode swapPairs(ListNode head) {
        if (head == null || head.next == null) {
            return head;
        }
        ListNode first = head;
        ListNode second = head.next;
        ListNode others = head.next.next;
        // å…ˆæŠŠå‰ä¸¤ä¸ªå…ƒç´ ç¿»è½¬
        second.next = first;
        // åˆ©ç”¨é€’å½’å®šä¹‰ï¼Œå°†å‰©ä¸‹çš„é“¾è¡¨èŠ‚ç‚¹ä¸¤ä¸¤ç¿»è½¬ï¼Œæ¥åˆ°åé¢
        first.next = swapPairs(others);
        // ç°åœ¨æ•´ä¸ªé“¾è¡¨éƒ½æˆåŠŸç¿»è½¬äº†ï¼Œè¿”å›æ–°çš„å¤´ç»“ç‚¹
        return second;

    }
}
```

## æ–¹æ³•äºŒï¼šè¿­ä»£

æ€è·¯ï¼šå®šä¹‰å››ä¸ªæŒ‡é’ˆï¼Œé€šè¿‡æ›´æ”¹nextæŒ‡å‘æ”¹å˜å…ƒç´ ä½ç½®ï¼Œå…·ä½“æµç¨‹å¦‚å›¾ï¼š

åˆå§‹æ—¶ï¼ŒcuræŒ‡å‘è™šæ‹Ÿå¤´ç»“ç‚¹ï¼Œç„¶åè¿›è¡Œå¦‚ä¸‹ä¸‰æ­¥ï¼š  
![ç¬¬ä¸€æ­¥](/images/5-2.png)  
æ“ä½œä¹‹åï¼Œé“¾è¡¨å¦‚ä¸‹:  
![ç¬¬äºŒæ­¥](/images/5-3.png)  
å³ï¼š  
![ç¬¬äºŒæ­¥](/images/5-4.png)  

æ³¨æ„ï¼š  
1. curæ¯æ¬¡éƒ½è¦æŒ‡å‘è¢«æ“ä½œçš„å…ƒç´ çš„å‰ä¸€ä¸ªä½ç½®ï¼Œï¼Œæ¯”å¦‚`å…ƒç´ [1,2]`äº¤æ¢ï¼Œ`cur`æŒ‡å‘1çš„å‰ä¸€ä¸ªç»“ç‚¹  
2. å½“æœ‰å¶æ•°ä¸ªç»“ç‚¹æ—¶ï¼Œç»ˆæ­¢æ¡ä»¶æ˜¯`cur.next == null`  
3. å½“æœ‰å¥‡æ•°ä¸ªç»“ç‚¹æ—¶ï¼Œç»ˆæ­¢æ¡ä»¶æ˜¯`cur.next.next == null`  

```java
class Solution {
  public ListNode swapPairs(ListNode head) {
        ListNode dumyhead = new ListNode(-1); // è®¾ç½®ä¸€ä¸ªè™šæ‹Ÿå¤´ç»“ç‚¹
        dumyhead.next = head; // å°†è™šæ‹Ÿå¤´ç»“ç‚¹æŒ‡å‘headï¼Œè¿™æ ·æ–¹ä¾¿åé¢åšåˆ é™¤æ“ä½œ
        ListNode cur = dumyhead;
        ListNode temp; // ä¸´æ—¶èŠ‚ç‚¹ï¼Œä¿å­˜ä¸¤ä¸ªèŠ‚ç‚¹åé¢çš„èŠ‚ç‚¹
        ListNode firstnode; // ä¸´æ—¶èŠ‚ç‚¹ï¼Œä¿å­˜ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹ä¸­çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹
        ListNode secondnode; // ä¸´æ—¶èŠ‚ç‚¹ï¼Œä¿å­˜ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹ä¸­çš„ç¬¬äºŒä¸ªèŠ‚ç‚¹
        while (cur.next != null && cur.next.next != null) {
            temp = cur.next.next.next;
            firstnode = cur.next;
            secondnode = cur.next.next;
            cur.next = secondnode;       // æ­¥éª¤ä¸€
            secondnode.next = firstnode; // æ­¥éª¤äºŒ
            firstnode.next = temp;      // æ­¥éª¤ä¸‰
            cur = firstnode; // curç§»åŠ¨ï¼Œå‡†å¤‡ä¸‹ä¸€è½®äº¤æ¢
        }
        return dumyhead.next;  
    }
}
```
ä¹Ÿå¯ä»¥é¢ å€’æ­¥éª¤äºŒå’Œæ­¥éª¤ä¸‰ï¼Œå°±ä¸ç”¨å®šä¹‰tempç»“ç‚¹äº†ï¼š
```java
// å°†æ­¥éª¤ 2,3 äº¤æ¢é¡ºåºï¼Œè¿™æ ·ä¸ç”¨å®šä¹‰ temp èŠ‚ç‚¹
public ListNode swapPairs(ListNode head) {
    ListNode dummy = new ListNode(0, head);
    ListNode cur = dummy;
    while (cur.next != null && cur.next.next != null) {
        ListNode node1 = cur.next;// ç¬¬ 1 ä¸ªèŠ‚ç‚¹
        ListNode node2 = cur.next.next;// ç¬¬ 2 ä¸ªèŠ‚ç‚¹
        cur.next = node2; // æ­¥éª¤ 1
        node1.next = node2.next;// æ­¥éª¤ 3
        node2.next = node1;// æ­¥éª¤ 2
        cur = cur.next.next;
    }
    return dummy.next;
}
```

# 19.åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹ 
[é¢˜ç›®é“¾æ¥ï¼š19.åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹](https://leetcode.cn/problems/remove-nth-node-from-end-of-list/description/)  
[æ–‡ç« é“¾æ¥](https://programmercarl.com/0019.%E5%88%A0%E9%99%A4%E9%93%BE%E8%A1%A8%E7%9A%84%E5%80%92%E6%95%B0%E7%AC%ACN%E4%B8%AA%E8%8A%82%E7%82%B9.html#%E7%AE%97%E6%B3%95%E5%85%AC%E5%BC%80%E8%AF%BE)  
[è§†é¢‘é“¾æ¥](https://www.bilibili.com/video/BV1vW4y1U7Gf/?spm_id_from=333.788&vd_source=bb16fbea368fef2149255510d2feefbe)  
çŠ¶æ€ï¼šå¿«æ…¢æŒ‡é’ˆä¸ºä»€ä¹ˆé‚£æ ·å†™ä¸æ¸…æ¥š

## å•é“¾è¡¨çš„å€’æ•°ç¬¬kä¸ªç»“ç‚¹
å‡è®¾ `k = 2`ï¼Œç»“ç‚¹ä¸ªæ•° `n = 6` æ€è·¯å¦‚ä¸‹ï¼š

é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆè®©ä¸€ä¸ªæŒ‡é’ˆ `p1` æŒ‡å‘é“¾è¡¨çš„å¤´èŠ‚ç‚¹ `head`ï¼Œç„¶åèµ° `k` æ­¥ï¼š  

`p1`èµ°äº†2æ­¥ï¼Œè¿˜å‰©6-2=4æ­¥åˆ°è¾¾`null`
![ç¬¬ä¸€æ­¥](/images/5-5.jpeg)
ç°åœ¨çš„ `p1`ï¼Œåªè¦å†èµ° `n - k` æ­¥ï¼Œå°±èƒ½èµ°åˆ°é“¾è¡¨æœ«å°¾çš„ç©ºæŒ‡é’ˆäº†å¯¹å§ï¼Ÿ

è¶è¿™ä¸ªæ—¶å€™ï¼Œå†ç”¨ä¸€ä¸ªæŒ‡é’ˆ `p2` æŒ‡å‘é“¾è¡¨å¤´èŠ‚ç‚¹ `head`ï¼š
![ç¬¬äºŒæ­¥](/images/5-6.jpeg)

æ¥ä¸‹æ¥å°±å¾ˆæ˜¾ç„¶äº†ï¼Œè®©`p1` å’Œ `p2` åŒæ—¶å‘å‰èµ°ï¼Œ`p1` èµ°åˆ°é“¾è¡¨æœ«å°¾çš„ç©ºæŒ‡é’ˆæ—¶å‰è¿›äº† `n - k` æ­¥ï¼Œp2 ä¹Ÿä» head å¼€å§‹å‰è¿›äº† `n - k` æ­¥ï¼Œåœç•™åœ¨ç¬¬ `n - k + 1` ä¸ªèŠ‚ç‚¹ä¸Šï¼Œå³æ°å¥½åœé“¾è¡¨çš„å€’æ•°ç¬¬`k` ä¸ªèŠ‚ç‚¹ä¸Šï¼š

![ç¬¬ä¸‰æ­¥](/images/5-7.jpeg)

è¿™æ ·ï¼Œåªéå†äº†ä¸€æ¬¡é“¾è¡¨ï¼Œå°±è·å¾—äº†å€’æ•°ç¬¬ `k` ä¸ªèŠ‚ç‚¹ `p2`ã€‚
### ä»£ç å®ç°ï¼ˆå¯»æ‰¾å€’æ•°ç¬¬kä¸ªç»“ç‚¹ï¼‰
```java
// è¿”å›é“¾è¡¨çš„å€’æ•°ç¬¬ k ä¸ªèŠ‚ç‚¹
ListNode findFromEnd(ListNode head, int k) {
    ListNode p1 = head;
    // p1 å…ˆèµ° k æ­¥
    for (int i = 0; i < k; i++) {
        p1 = p1.next;
    }
    ListNode p2 = head;
    // p1 å’Œ p2 åŒæ—¶èµ° n - k æ­¥
    while (p1 != null) {
        p2 = p2.next;
        p1 = p1.next;
    }
    // p2 ç°åœ¨æŒ‡å‘ç¬¬ n - k + 1 ä¸ªèŠ‚ç‚¹ï¼Œå³å€’æ•°ç¬¬ k ä¸ªèŠ‚ç‚¹
    return p2;
}
```
åŸºäºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼š

åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬nä¸ªç»“ç‚¹ï¼Œå°±è¦æ‰¾åˆ°ä»–çš„å€’æ•°ç¬¬n+1ä¸ªç»“ç‚¹ï¼Œç„¶åå†ä¿®æ”¹å€’æ•°ç¬¬n+1ä¸ªç»“ç‚¹çš„nextæŒ‡é’ˆå³å¯

## ä»£ç å®ç°ï¼ˆJavaï¼‰
```java
class Solution {
    // ä¸»å‡½æ•°
    public ListNode removeNthFromEnd(ListNode head, int n) {
        // è™šæ‹Ÿå¤´ç»“ç‚¹
        ListNode dummy = new ListNode(-1);
        dummy.next = head;
        // åˆ é™¤å€’æ•°ç¬¬ n ä¸ªï¼Œè¦å…ˆæ‰¾å€’æ•°ç¬¬ n + 1 ä¸ªèŠ‚ç‚¹
        ListNode x = findFromEnd(dummy, n + 1);
        // åˆ æ‰å€’æ•°ç¬¬ n ä¸ªèŠ‚ç‚¹
        x.next = x.next.next;
        return dummy.next;
    }

    // è¿”å›é“¾è¡¨çš„å€’æ•°ç¬¬ k ä¸ªèŠ‚ç‚¹
    ListNode findFromEnd(ListNode head, int k) {
        ListNode p1 = head;
        // p1 å…ˆèµ° k æ­¥
        for (int i = 0; i < k; i++) {
            p1 = p1.next;
        }
        ListNode p2 = head;
        // p1 å’Œ p2 åŒæ—¶èµ° n - k æ­¥
        while (p1 != null) {
            p2 = p2.next;
            p1 = p1.next;
        }
        // p2 ç°åœ¨æŒ‡å‘ç¬¬ n - k ä¸ªèŠ‚ç‚¹
        return p2;
    }
}
// è¯¦ç»†è§£æå‚è§ï¼š
// https://labuladong.online/algo/slug.html?slug=remove-nth-node-from-end-of-list

```

# é¢è¯•é¢˜ 02.07. é“¾è¡¨ç›¸äº¤
åŒ 160.ç›¸äº¤é“¾è¡¨  
[é¢˜ç›®é“¾æ¥ï¼šé¢è¯•é¢˜ 02.07. é“¾è¡¨ç›¸äº¤](https://leetcode.cn/problems/intersection-of-two-linked-lists-lcci/)  
[æ–‡ç« é“¾æ¥](https://programmercarl.com/%E9%9D%A2%E8%AF%95%E9%A2%9802.07.%E9%93%BE%E8%A1%A8%E7%9B%B8%E4%BA%A4.html#%E6%80%9D%E8%B7%AF)  
çŠ¶æ€ï¼šä¹‹å‰åšè¿‡ï¼Œæœ‰ç‚¹å°è±¡

æ ¸å¿ƒæ€è·¯ï¼š`p1=headA`,`p2=headB`,è®©`p1`å’Œ`p2`èƒ½å¤ŸåŒæ—¶åˆ°è¾¾ç›¸äº¤ç»“ç‚¹`c1`

## åŒæŒ‡é’ˆæ³•
éš¾ç‚¹åœ¨äºï¼Œç”±äºä¸¤æ¡é“¾è¡¨çš„é•¿åº¦å¯èƒ½ä¸åŒï¼Œä¸¤æ¡é“¾è¡¨ä¹‹é—´çš„èŠ‚ç‚¹æ— æ³•å¯¹åº”ï¼š  
![Aå’ŒB](/images/5-8.jpeg)  
å¦‚æœç”¨ä¸¤ä¸ªæŒ‡é’ˆ `p1` å’Œ `p2` åˆ†åˆ«åœ¨ä¸¤æ¡é“¾è¡¨ä¸Šå‰è¿›ï¼Œå¹¶ä¸èƒ½åŒæ—¶èµ°åˆ°å…¬å…±èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ— æ³•å¾—åˆ°ç›¸äº¤èŠ‚ç‚¹ `c1`ã€‚

è§£å†³è¿™ä¸ªé—®é¢˜çš„å…³é”®æ˜¯ï¼Œé€šè¿‡æŸäº›æ–¹å¼ï¼Œè®© `p1` å’Œ `p2` èƒ½å¤ŸåŒæ—¶åˆ°è¾¾ç›¸äº¤èŠ‚ç‚¹ c1ã€‚

æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥è®© `p1` éå†å®Œé“¾è¡¨ `A` ä¹‹åå¼€å§‹éå†é“¾è¡¨ `B`ï¼Œè®© `p2` éå†å®Œé“¾è¡¨ `B` ä¹‹åå¼€å§‹éå†é“¾è¡¨ `A`ï¼Œè¿™æ ·ç›¸å½“äºã€Œé€»è¾‘ä¸Šã€ä¸¤æ¡é“¾è¡¨æ¥åœ¨äº†ä¸€èµ·ã€‚

å¦‚æœè¿™æ ·è¿›è¡Œæ‹¼æ¥ï¼Œå°±å¯ä»¥è®© `p1` å’Œ `p2` åŒæ—¶è¿›å…¥å…¬å…±éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯åŒæ—¶åˆ°è¾¾ç›¸äº¤èŠ‚ç‚¹ `c1`ï¼š

![æ‹¼æ¥Aå’ŒB](/images/5-9.jpeg)

é‚£ä½ å¯èƒ½ä¼šé—®ï¼Œå¦‚æœè¯´ä¸¤ä¸ªé“¾è¡¨æ²¡æœ‰ç›¸äº¤ç‚¹ï¼Œæ˜¯å¦èƒ½å¤Ÿæ­£ç¡®çš„è¿”å› `null` å‘¢ï¼Ÿ

è¿™ä¸ªé€»è¾‘å¯ä»¥è¦†ç›–è¿™ç§æƒ…å†µçš„ï¼Œç›¸å½“äº `c1` èŠ‚ç‚¹æ˜¯ `null` ç©ºæŒ‡é’ˆå˜›ï¼Œå¯ä»¥æ­£ç¡®è¿”å› `null`ã€‚

### ä»£ç å®ç°ï¼ˆJavaï¼‰
```java
/**
 * Definition for singly-linked list.
 * public class ListNode {
 * int val;
 * ListNode next;
 * ListNode(int x) {
 * val = x;
 * next = null;
 * }
 * }
 */
public class Solution {
    public ListNode getIntersectionNode(ListNode headA, ListNode headB) {
        // p1æŒ‡å‘Aé“¾è¡¨å¤´ç»“ç‚¹ï¼Œp2æŒ‡å‘Bé“¾è¡¨å¤´ç»“ç‚¹
        ListNode p1 = headA, p2 = headB;
        while (p1 != p2) {
            //p1èµ°ä¸€æ­¥ï¼Œå¦‚æœèµ°åˆ°Aé“¾è¡¨æœ«å°¾ï¼Œè½¬åˆ°Bé“¾è¡¨
            if (p1 == null) {
                p1 = headB;
            } else {
                p1 = p1.next;
            }
            //p2èµ°ä¸€æ­¥ï¼Œå¦‚æœèµ°åˆ°Bé“¾è¡¨æœ«å°¾ï¼Œè½¬åˆ°Aé“¾è¡¨
            if (p2 == null) {
                p2 = headA;
            } else {
                p2 = p2.next;
            }
        }
        //æ­¤æ—¶p1 == p2
        //1.è¦ä¹ˆä¸¤æ¡é“¾è¡¨ä¸ç›¸äº¤ï¼Œä»–ä»¬åŒæ—¶èµ°åˆ°null
        //2.è¦ä¹ˆä¸¤æ¡é“¾è¡¨ç›¸äº¤ï¼Œä»–ä¿©åŒæ—¶èµ°åˆ°ç›¸äº¤ç‚¹
        return p1;
    }
}
```

## æ±‚é•¿åº¦æ³•
æ—¢ç„¶è¦è®©`p1`å’Œ`p2`åŒæ—¶åˆ°è¾¾ç›¸äº¤ç»“ç‚¹`c1`ï¼Œé‚£ä¹ˆè®©`A`å’Œ`B`é•¿åº¦æ›´å¤§çš„é‚£ä¸ªå¯¹åº”çš„`æŒ‡é’ˆå‘åç§»åŠ¨ä¸¤ä¸ªé“¾è¡¨çš„é•¿åº¦å·®`å³å¯ã€‚
### ä»£ç å®ç°ï¼ˆJavaï¼‰
```java
/**
 * Definition for singly-linked list.
 * public class ListNode {
 * int val;
 * ListNode next;
 * ListNode(int x) {
 * val = x;
 * next = null;
 * }
 * }
 */
public class Solution {
    public ListNode getIntersectionNode(ListNode headA, ListNode headB) {
        // æ ¸å¿ƒæ˜¯è®©p1å’Œp2ä¸¤ä¸ªæŒ‡é’ˆåŒæ—¶åˆ°è¾¾ç›¸äº¤ç»“ç‚¹ï¼Œå¯ä»¥é€šè¿‡è®¡ç®—ä¸¤æ¡é“¾è¡¨çš„é•¿åº¦
        int lenA = 0, lenB = 0;
        // è®¡ç®—ä¸¤æ¡é“¾è¡¨çš„é•¿åº¦
        for (ListNode p1 = headA; p1 != null; p1 = p1.next) {
            lenA++;
        }
        for (ListNode p2 = headB; p2 != null; p2 = p2.next) {
            lenB++;
        }
        // è®©p1å’Œp2åˆ°è¾¾å°¾éƒ¨çš„è·ç¦»ç›¸åŒ
        ListNode p1 = headA, p2 = headB;
        if (lenA > lenB) {
            // p1æŒ‡é’ˆå‘åç§»åŠ¨(lenA-lenB)æ­¥
            for (int i = 0; i < lenA - lenB; i++) {
                p1 = p1.next;
            }
        } else {
            //p2æŒ‡é’ˆå‘åç§»åŠ¨(lenB-lenA)æ­¥
            for (int i = 0; i < lenB - lenA; i++) {
                p2 = p2.next;
            }
        }
        //çœ‹ä¸¤ä¸ªæŒ‡é’ˆæ˜¯å¦ä¼šæŒ‡å‘åŒä¸€ä½ç½®ï¼Œp1==p2æ—¶æœ‰ä¸¤ç§æƒ…å†µ
        //1ã€è¦ä¹ˆä¸¤æ¡é“¾è¡¨ä¸ç›¸äº¤ï¼Œp1p2åŒæ—¶èµ°åˆ°å°¾éƒ¨çš„null
        //2ã€è¦ä¹ˆä¸¤æ¡é“¾è¡¨ç›¸äº¤ï¼Œp1p2åŒæ—¶èµ°åˆ°ç›¸äº¤ç‚¹
        while(p1!=p2){
            p1=p1.next;
            p2=p2.next;
        }
        // return p2;
        return p1;//return p1å’Œp2æ˜¯ç­‰ä»·çš„
    }
}
```

# 142.ç¯å½¢é“¾è¡¨II 
[é¢˜ç›®é“¾æ¥ï¼š142.ç¯å½¢é“¾è¡¨II](https://leetcode.cn/problems/linked-list-cycle-ii/description/)  
[æ–‡ç« é“¾æ¥](https://programmercarl.com/0142.%E7%8E%AF%E5%BD%A2%E9%93%BE%E8%A1%A8II.html#%E7%AE%97%E6%B3%95%E5%85%AC%E5%BC%80%E8%AF%BE)  
[è§†é¢‘é“¾æ¥](https://www.bilibili.com/video/BV1if4y1d7ob/?spm_id_from=333.788&vd_source=bb16fbea368fef2149255510d2feefbe)  
çŠ¶æ€ï¼šå¯¹æ–¹æ³•ç†è§£å›°éš¾

## ç†è§£è¿™é“é¢˜çš„å‰èœğŸ¥¬
[876. é“¾è¡¨çš„ä¸­é—´ç»“ç‚¹](https://leetcode.cn/problems/middle-of-the-linked-list/description/)  
[141. ç¯å½¢é“¾è¡¨](https://leetcode.cn/problems/linked-list-cycle/description/)  

### 876.é“¾è¡¨çš„ä¸­é—´ç»“ç‚¹
ç”¨å¿«æ…¢æŒ‡é’ˆï¼Œå¿«æŒ‡é’ˆ`fast`ä¸€æ¬¡èµ°ä¸¤ä¸ªç»“ç‚¹ï¼Œæ…¢æŒ‡é’ˆ`slow`ä¸€æ¬¡èµ°ä¸€ä¸ªç»“ç‚¹ï¼Œå½“`fast`åˆ°è¾¾é“¾è¡¨æœ«å°¾çš„æ—¶å€™ï¼Œ`slow`åˆ°è¾¾é“¾è¡¨ä¸­ç‚¹ã€‚  
![å¥‡æ•°ä¸ªç»“ç‚¹](/images/5-10.png)
![å¶æ•°ä¸ªç»“ç‚¹](/images/5-11.png)  
```java
/**
 * Definition for singly-linked list.
 * public class ListNode {
 * int val;
 * ListNode next;
 * ListNode() {}
 * ListNode(int val) { this.val = val; }
 * ListNode(int val, ListNode next) { this.val = val; this.next = next; }
 * }
 */
class Solution {
    public ListNode middleNode(ListNode head) {
        // å¿«æ…¢æŒ‡é’ˆåŒæ—¶æŒ‡å‘head
        ListNode fast = head, slow = head;
        // fast = head;
        // slow = head;

        // fastç§»åŠ¨åˆ°æœ«å°¾æ—¶åœæ­¢
        // å¥‡æ•°ä¸ªå…ƒç´ ï¼Œfastç§»åŠ¨åˆ°æœ«å°¾æ—¶fast.next==null
        // å¶æ•°ä¸ªå…ƒç´ ï¼Œfastç§»åŠ¨åˆ°æœ«å°¾æ—¶fast==null
        while (fast != null && fast.next != null) {
            //å¿«æŒ‡é’ˆèµ°ä¸¤æ­¥
            fast = fast.next.next;
            //æ…¢æŒ‡é’ˆèµ°ä¸¤æ­¥
            slow = slow.next;
        }
        // å¥‡æ•°ä¸ªå…ƒç´ æ—¶ï¼ŒslowæŒ‡å‘ä¸­ç‚¹
        // å¶æ•°ä¸ªå…ƒç´ æ—¶ï¼ŒslowæŒ‡å‘ç¬¬äºŒä¸ªä¸­ç‚¹
        return slow;
    }
}
```
æ³¨æ„ï¼Œå¿…é¡»å…ˆåˆ¤æ–­`fast != null`åœ¨åˆ¤æ–­`fast.next != null`ï¼Œå¦åˆ™ä¼šæ“ä½œ`null.next`ï¼ŒæŠ›å‡ºæ“ä½œç©ºæŒ‡é’ˆçš„å¼‚å¸¸ã€‚

### 141.ç¯å½¢é“¾è¡¨
å¦‚æœ `fast` æœ€ç»ˆèƒ½æ­£å¸¸èµ°åˆ°é“¾è¡¨æœ«å°¾ï¼Œè¯´æ˜é“¾è¡¨ä¸­æ²¡æœ‰ç¯ï¼›å¦‚æœ `fast` èµ°ç€èµ°ç€ç«Ÿç„¶å’Œ `slow` ç›¸é‡äº†ï¼Œé‚£è‚¯å®šæ˜¯ `fast` åœ¨é“¾è¡¨ä¸­è½¬åœˆäº†ï¼Œè¯´æ˜é“¾è¡¨ä¸­å«æœ‰ç¯ã€‚
```java
boolean hasCycle(ListNode head) {
    // å¿«æ…¢æŒ‡é’ˆåˆå§‹åŒ–æŒ‡å‘ head
    ListNode slow = head, fast = head;
    // å¿«æŒ‡é’ˆèµ°åˆ°æœ«å°¾æ—¶åœæ­¢
    while (fast != null && fast.next != null) {
        // æ…¢æŒ‡é’ˆèµ°ä¸€æ­¥ï¼Œå¿«æŒ‡é’ˆèµ°ä¸¤æ­¥
        slow = slow.next;
        fast = fast.next.next;
        // å¿«æ…¢æŒ‡é’ˆç›¸é‡ï¼Œè¯´æ˜å«æœ‰ç¯
        if (slow == fast) {
            return true;
        }
    }
    // ä¸åŒ…å«ç¯
    return false;
}
```
## å…³äºè¿™é“é¢˜
å¯ä»¥åˆ†æˆä¸¤æ­¥:
- ç¬¬ä¸€æ­¥ï¼šåˆ¤æ–­é“¾è¡¨æ˜¯å¦æœ‰ç¯
    - å¿«æ…¢æŒ‡é’ˆç›¸é‡å³æœ‰ç¯
- ç¬¬äºŒæ­¥ï¼šæ‰¾åˆ°ç¯çš„èµ·ç‚¹
    - å¿«æ…¢æŒ‡é’ˆç›¸é‡åï¼Œ`slow`å›åˆ°`head`ï¼Œ`slow`å’Œ`fast`æ¯æ¬¡ç§»åŠ¨ä¸€ä½ï¼Œç›¸é‡çš„ç‚¹å°±æ˜¯ç¯çš„èµ·ç‚¹
### åŸç†è§£é‡Š
![](/images/5-13.png)  
å½“`slow`å’Œ`fast`ç›¸é‡æ—¶ï¼Œ`slow`åˆšè¿›å…¥ç¯æ²¡å¤šä¹…å°±è¢«`fast`è¿½ä¸Šäº†ï¼Œ`slow`ä»`head`èµ°è¿‡çš„è·ç¦»=`x+y`ï¼Œ`fast`ä»`head`èµ°è¿‡çš„è·ç¦»=`x+y+n(y+z)`ï¼Œåˆå› ä¸º`è·¯ç¨‹=é€Ÿåº¦*æ—¶é—´`ï¼Œfastçš„è·¯ç¨‹=2å€çš„slowçš„è·¯ç¨‹ã€‚(nè¡¨ç¤ºfastç»•ç¯çš„æ¬¡æ•°)
æ‰€ä»¥  

`2(x+y)=x+y+n(y+z)`---->   `x =(n-1)(y+z)+z(n>=1)`
å³ `x = å¸¸æ•° + z`ã€‚  
é‚£ä¹ˆæ€ä¹ˆå¾—åˆ°xå‘¢ï¼Ÿå¯ä»¥è®©`fast`ä»ç›¸é‡ç‚¹å¼€å§‹ï¼Œ`slow`ä»`head`å¼€å§‹ï¼Œå®ƒä»¬ä»¥ç›¸åŒçš„é€Ÿåº¦ç§»åŠ¨ï¼Œç”±äº`slow`è¦èµ°çš„çš„è·¯ç¨‹æ˜¯`x`ï¼Œ`fast`è¦èµ°çš„è·¯ç¨‹æ˜¯`å¸¸æ•°+z`ï¼Œé‚£ä¹ˆå®ƒä»¬ä¼šåœ¨æŸä¸€åˆ»åŒæ—¶åˆ°è¾¾ç¯çš„èµ·ç‚¹ã€‚

- å…³äºä¸ºä»€ä¹ˆç¬¬ä¸€æ¬¡ç›¸é‡çš„æ—¶å€™`slow`åˆšå…¥ç¯è€Œä¸æ˜¯å·²ç»åœ¨ç¯é‡Œç»•è¿‡åœˆäº†ï¼Ÿ
    - `fast`ä¸€æ¬¡èµ°ä¸¤æ­¥ï¼Œ`slow`ä¸€æ¬¡èµ°ä¸€æ­¥ï¼Œæ ¹æ®ç›¸å¯¹è¿åŠ¨åŸåˆ™ï¼Œ`fast`ç›¸å¯¹`slow`æ˜¯ä»¥ 1æ­¥/æ¬¡ çš„é€Ÿåº¦é è¿‘çš„ï¼Œé‚£ä¹ˆ`fast`ä¸€å®šä¼šåœ¨ä¸€åœˆä¹‹å†…ä¸`slow`ç›¸é‡ã€‚ï¼ˆPS.å¯ä»¥å°† `slow` è§†ä¸ºé™æ­¢çŠ¶æ€ï¼Œ`fast`ç»•ç€ç¯è·‘ï¼Œä¸€å®šä¼šåœ¨ä¸€åœˆä¹‹å†…è¿½ä¸Š`slow`ï¼‰
- å…³äºä¸ºä»€ä¹ˆè®¾ç½®`fast`ä¸€æ¬¡èµ°ä¸¤æ­¥è€Œä¸æ˜¯èµ°ä¸‰æ­¥ï¼Ÿ
    - `fast`ç›¸å¯¹`slow`èµ°ä¸€æ­¥å¯ä»¥ç¡®ä¿åœ¨ç¯å†…å®ƒä»¬ä¸€å®šä¼šç›¸é‡ï¼Œè‹¥`fast`ç›¸å¯¹`slow`èµ°ä¸¤æ­¥ï¼Œå¯èƒ½ä¼šè·³è¿‡`slow`çš„ä½ç½®ã€‚
### ä»£ç å®ç°ï¼ˆJavaï¼‰
```java
/**
 * Definition for singly-linked list.
 * class ListNode {
 * int val;
 * ListNode next;
 * ListNode(int x) {
 * val = x;
 * next = null;
 * }
 * }
 */
public class Solution {
    public ListNode detectCycle(ListNode head) {
        // ç¬¬ä¸€æ­¥ï¼šç¡®å®šæ˜¯å¦æœ‰ç¯
        ListNode slow = head, fast = head;
        // å‘æœ«å°¾ç§»åŠ¨
        while (fast != null && fast.next != null) {
            fast = fast.next.next;// èµ°ä¸¤æ­¥
            slow = slow.next;// èµ°ä¸€æ­¥
            if (fast == slow)
                break;// ç›¸é‡ï¼Œæœ‰ç¯
        }
        // æ— ç¯çš„æƒ…å†µ
        if (fast == null || fast.next == null)
            return null;
        // ç¬¬äºŒæ­¥ï¼šç¡®å®šç¯çš„èµ·ç‚¹
        slow = head;// slowè¿”å›å¤´ç»“ç‚¹
        while (slow != fast) {
            slow = slow.next;// èµ°ä¸€æ­¥
            fast = fast.next;// èµ°ä¸€æ­¥
        }
        // ç›¸é‡çš„ç»“ç‚¹å°±æ˜¯ç¯èµ·ç‚¹
        return slow;
    }
}
```

# é“¾è¡¨æ€»ç»“
![é“¾è¡¨æ€ç»´å¯¼å›¾](/images/é“¾è¡¨.png)